Title: Overview of the TREC 2021 Fair Ranking Track
Authors: Michael D. Ekstrand, Graham McDonald
Section: 56 0.008593 0.124741 0.009902 0.000342 0.000587 0.015458 0.001078
0.0 1193 0.0 0.0 0.0 1542 0.0 0.0 0.0 ... ... ... ... 150 63656179 0.0 0.0 0.0 63807245 NaN NaN NaN 64614938 0.0 0.0 0.0 64716982 0.0 0.0 0.0 65355704 0.0 0.0 0.0 [2199077 rows x 8 columns] Now we need to compute the per-query target exposures. This starst with aligning our vectors: qp geo exp, qp geo align = qp exp.align(qp geo align, fill value=0) And now we can multiply the exposure vector by the alignment vector, and summing by topic - this is equivalent to the matrix-vector multiplication on a topic-by-topic basis. qp aexp = qp geo align.multiply(qp geo exp, axis=0) q geo align = qp aexp.groupby('q id').sum() Now things get a little weird. We want to average the empirical distribution with the world population to compute our fairness target. However, we don’t have empirical data on the distribution of articles that do or do not have geographic alignments. Therefore, we are going to average only the known-geography vector with the world population. This proceeds in N steps: 1. Normalize the known-geography matrix so its rows sum to 1. 2. Average each row with the world population. 3. De-normalize the known-geography matrix so it is in the original scale, but adjusted w/ world popu- lation 4. Normalize the entire matrix so its rows sum to 1 Let’s go. qg known = q geo align.drop(columns=['Unknown']) Normalize (adding a small value to avoid division by zero - affected entries will have a zero numerator anyway): qg ksums = qg known.sum(axis=1) qg kd = qg known.divide(np.maximum(qg ksums, 1.0e-6), axis=0) Average: qg kd = (qg kd + world pop) * 0.5 De-normalize: qg known = qg kd.multiply(qg ksums, axis=0) Recombine with the Unknown column: q geo tgt = q geo align[['Unknown']].join(qg known) Normalize targets: q geo tgt = q geo tgt.divide(q geo tgt.sum(axis=1), axis=0) q geo tgt Unknown Africa Antarctica Asia Europe \ q_id 1 0.575338 0.043635 3.278897e-08 0.153851 0.098450 2 0.173889 0.069608 6.378567e-08 0.294269 0.280798 3 0.234897 0.101882 5.907510e-08 0.278161 0.215027 4 0.312664 0.076008 8.262075e-05 0.246140 0.145192 5 0.182143 0.063760 6.314834e-08 0.273795 0.046710 ... ... ... ... ... ... 146 0.292441 0.090378 5.463208e-08 0.299627 0.067556 147 0.434276 0.060053 4.368069e-08 0.195520 0.130625 148 0.637050 0.033542 2.802409e-08 0.233693 0.045680 149 0.370828 0.061724 4.857964e-08 0.243518 0.172170 150 0.414091 0.062031 4.523918e-08 0.208319 0.131270 Latin America and the Caribbean Northern America Oceania q_id 1 0.025042 0.065388 0.038296 2 0.046323 0.115193 0.019920 3 0.071196 0.077784 0.021053 4 0.058319 0.143947 0.017648 5 0.061549 0.366345 0.005697 ... ... ... ... 146 0.045686 0.178497 0.025815 147 0.061604 0.091005 0.026916