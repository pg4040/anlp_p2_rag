Title: Overview of the TREC 2021 Fair Ranking Track
Authors: Michael D. Ekstrand, Graham McDonald
Section: A Alignments
q am <xarray.DataArray (geography: 8, gender: 4)> array([[3767., 52., 200., 0.], [ 128., 12., 7., 0.], [ 0., 0., 0., 0.], [ 322., 11., 29., 0.], [ 940., 23., 96., 0.], [ 79., 8., 7., 0.], [ 618., 28., 131., 0.], [ 484., 6., 41., 0.]]) Coordinates: * geography (geography) object ’Unknown’ ’Africa’ ... ’Oceania’ * gender (gender) object ’unknown’ ’female’ ’male’ ’third’ Now we need to do reset the (0,0) coordinate (full unknown), and normalize to a proportion. q am[0, 0] = 0 q am = q am / q am.sum() q am <xarray.DataArray (geography: 8, gender: 4)> array([[0. , 0.01613904, 0.06207325, 0. ], [0.03972688, 0.00372439, 0.00217256, 0. ], [0. , 0. , 0. , 0. ], [0.09993793, 0.00341403, 0.00900062, 0. ], [0.29174426, 0.00713842, 0.02979516, 0. ], [0.02451893, 0.00248293, 0.00217256, 0. ], [0.19180633, 0.00869025, 0.04065798, 0. ], [0.15021726, 0.0018622 , 0.01272502, 0. ]]) Coordinates: * geography (geography) object ’Unknown’ ’Africa’ ... ’Oceania’ * gender (gender) object ’unknown’ ’female’ ’male’ ’third’ Ok, now we have to - very carefully - average with our target modifier. There are three groups: • known (use intersectional target) • known-geo (use geo target) • known-gender (use gender target) For each of these, we need to respect the fraction of the total it represents. Let’s compute those fractions: q fk all = q am[1:, 1:].sum() q fk geo = q am[1:, :1].sum() q fk gen = q am[:1, 1:].sum() q fk all, q fk geo, q fk gen (<xarray.DataArray ()> array(0.12383613), <xarray.DataArray ()> array(0.79795158), <xarray.DataArray ()> array(0.07821229)) And now do some surgery. Weighted-average to incorporate the target for fully-known: q tm = q am.copy() q tm[1:, 1:] *= 0.5 q tm[1:, 1:] += int tgt * 0.5 * q fk all q tm <xarray.DataArray (geography: 8, gender: 4)> array([[0.00000000e+00, 1.61390441e-02, 6.20732464e-02, 0.00000000e+00], [3.97268777e-02, 6.61502352e-03, 5.83910794e-03, 9.60166894e-05], [0.00000000e+00, 4.73300933e-09, 4.73300933e-09, 9.56163501e-11], [9.99379268e-02, 2.01028882e-02, 2.28961843e-02, 3.71633817e-04], [2.91744258e-01, 6.74645100e-03, 1.80748185e-02, 6.41866532e-05], [2.45189323e-02, 3.88031961e-03, 3.72513649e-03, 5.33101956e-05], [1.91806331e-01, 5.86585240e-03, 2.18497134e-02, 3.07217202e-05], [1.50217256e-01, 1.09501611e-03, 6.52642517e-03, 3.31146285e-06]]) Coordinates: * geography (geography) object ’Unknown’ ’Africa’ ... ’Oceania’ * gender (gender) object ’unknown’ ’female’ ’male’ ’third’ And for known-geo: q tm[1:, :1] *= 0.5 q tm[1:, :1] += geo tgt xa * 0.5 * q fk geo And known-gender: q tm[:1, 1:] *= 0.5 q tm[:1, 1:] += gender tgt xa * 0.5 * q fk gen q tm <xarray.DataArray (geography: 8, gender: 4)> array([[0.00000000e+00, 2.74270639e-02, 5.03941651e-02, 3.91061453e-04], [8.17328395e-02, 6.61502352e-03, 5.83910794e-03, 9.60166894e-05], [6.16114376e-08, 4.73300933e-09, 4.73300933e-09, 9.56163501e-11], [2.89435265e-01, 2.01028882e-02, 2.28961843e-02, 3.71633817e-04], [1.87231499e-01, 6.74645100e-03, 1.80748185e-02, 6.41866532e-05], [4.66104719e-02, 3.88031961e-03, 3.72513649e-03, 5.33101956e-05], [1.15699041e-01, 5.86585240e-03, 2.18497134e-02, 3.07217202e-05], [7.72424054e-02, 1.09501611e-03,