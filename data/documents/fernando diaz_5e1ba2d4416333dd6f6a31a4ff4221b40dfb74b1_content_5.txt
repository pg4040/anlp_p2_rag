Title: Overview of the TREC 2021 Fair Ranking Track
Authors: Michael D. Ekstrand, Graham McDonald
Section: A Alignments
can be intersectionally unknown: we may know gender but not geography, or vice versa. To deal with these missing values for Task 1, we’re going to ignore totally unknown values, but keep partially-known as a category. We also need to ravel our tensors into a matrix for compatibility with the metric code. Since ’unknown’ is the first value on each axis, we can ravel, and then drop the first column. xshp = page xalign.shape xshp = (xshp[0], xshp[1] * xshp[2]) page xa df = pd.DataFrame(page xalign.values.reshape(xshp), index=page xalign.indexes['page']) page xa df.head() 0 1 2 3 4 5 6 7 8 9 ... 22 23 24 \ page ... 12 1.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 25 1.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 39 1.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 290 1.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 ... 0.0 0.0 0.0 303 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 ... 0.0 0.0 1.0 25 26 27 28 29 30 31 page 12 0.0 0.0 0.0 0.0 0.0 0.0 0.0 25 0.0 0.0 0.0 0.0 0.0 0.0 0.0 39 0.0 0.0 0.0 0.0 0.0 0.0 0.0 290 0.0 0.0 0.0 0.0 0.0 0.0 0.0 303 0.0 0.0 0.0 0.0 0.0 0.0 0.0 [5 rows x 32 columns] And drop unknown, to get our page alignment vectors: page kia = page xa df.iloc[:, 1:] A.5.1 Geographic Alignment We’ll start with the metric configuration for public training data, considering only geographic alignment. We configure the metric to do this for both the training and the eval queries. Training Queries train qalign = train qrels.join(page kga, on='page id').drop(columns=['page id']).groupby('id').sum() tqa sums = train qalign.sum(axis=1) train qalign = train qalign.divide(tqa sums, axis=0) train qalign.head() Africa Antarctica Asia Europe Latin America and the Caribbean \ id 1 0.049495 0.00000 0.121886 0.356566 0.031650 2 0.013388 0.00000 0.112008 0.574026 0.026105 3 0.109664 0.00000 0.125529 0.456033 0.100040 4 0.062495 0.00025 0.116161 0.327272 0.079514 5 0.000835 0.00000 0.065433 0.010149 0.064755 Northern America Oceania id 1 0.261616 0.178788 2 0.228715 0.045758 3 0.158419 0.050316 4 0.369277 0.045032 5 0.850192 0.008636 train qtarget = (train qalign + world pop) * 0.5 train qtarget.head() Africa Antarctica Asia Europe \ id 1 0.102283 7.721200e-08 0.361044 0.230115 2 0.084229 7.721200e-08 0.356105 0.338845 3 0.132367 7.721200e-08 0.362866 0.279848 4 0.108783 1.250113e-04 0.358182 0.215468 5 0.077953 7.721200e-08 0.332818 0.056906 Latin America and the Caribbean Northern America Oceania